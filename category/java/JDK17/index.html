<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.113.0"><meta charset=utf-8><title>新项目为什么决定用 JDK 17了 · 古时的风筝</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="最近在调研 JDK 17，并且试着将之前的一个小项目升级了一下，在测试环境跑了一段时间。最终，决定了，新项目要采用 JDK 17 了。 JDK 1.8：“不是说好了，他"><meta name=keywords content="Hugo,theme,编程,java,ChatGPT,程序员,开发"><link rel=canonical href=https://moonkite.cn/category/java/JDK17/><link rel=icon href=https://moonkite.cn/images/photo.png><link rel=stylesheet href=https://cdn.usebootstrap.com/bootstrap/4.1.3/css/bootstrap.min.css><link rel=stylesheet href=https://moonkite.cn/css/den.css><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?e417ddf834c7bb7411207e1fa09815aa",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="新项目为什么决定用 JDK 17了"><meta property="og:description" content="最近在调研 JDK 17，并且试着将之前的一个小项目升级了一下，在测试环境跑了一段时间。最终，决定了，新项目要采用 JDK 17 了。 JDK 1.8：“不是说好了，他"><meta property="og:type" content="article"><meta property="og:url" content="https://moonkite.cn/category/java/JDK17/"><meta property="article:section" content="category"><meta property="article:published_time" content="2022-12-16T08:56:23+08:00"><meta property="article:modified_time" content="2022-12-16T08:56:23+08:00"><meta itemprop=name content="新项目为什么决定用 JDK 17了"><meta itemprop=description content="最近在调研 JDK 17，并且试着将之前的一个小项目升级了一下，在测试环境跑了一段时间。最终，决定了，新项目要采用 JDK 17 了。 JDK 1.8：“不是说好了，他"><meta itemprop=datePublished content="2022-12-16T08:56:23+08:00"><meta itemprop=dateModified content="2022-12-16T08:56:23+08:00"><meta itemprop=wordCount content="2270"><meta itemprop=keywords content="Java,JDK,JVM,JDK17,"><meta name=twitter:card content="summary"><meta name=twitter:title content="新项目为什么决定用 JDK 17了"><meta name=twitter:description content="最近在调研 JDK 17，并且试着将之前的一个小项目升级了一下，在测试环境跑了一段时间。最终，决定了，新项目要采用 JDK 17 了。 JDK 1.8：“不是说好了，他"></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://moonkite.cn/images/background.png);background-position:top;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://moonkite.cn/></a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a href=https://moonkite.cn/ class=nav-link><i class="fas fad fa-h-square"></i>主页</a></li><li class=nav-item><a href=https://moonkite.cn/category/notes/ class=nav-link><i class='fas fa-yin-yang'></i>生活随笔</a></li><li class=nav-item><a href=javascript:void(0) class=nav-link><i class='fas fa-laptop-code'></i>技术文章</a><div class=sub-dropdown-menu><a class=sub-nav-link href=https://moonkite.cn/category/java><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48"><path fill="#f44336" d="M23.65 24.898c-.998-1.609-1.722-2.943-2.725-5.455C19.229 15.2 31.24 11.366 26.37 3.999c2.111 5.089-7.577 8.235-8.477 12.473-.823 3.898 5.752 8.426 5.757 8.426z"/><path fill="#f44336" d="M23.878 17.27c-.192 2.516 2.229 3.857 2.299 5.695.056 1.496-1.447 2.743-1.447 2.743s2.728-.536 3.579-2.818c.945-2.534-1.834-4.269-1.548-6.298.267-1.938 6.031-5.543 6.031-5.543S24.311 11.611 23.878 17.27z"/><g><path fill="#1565c0" d="M32.084 25.055c1.754-.394 3.233.723 3.233 2.01.0 2.901-4.021 5.643-4.021 5.643s6.225-.742 6.225-5.505c0-3.15-3.057-3.937-5.437-2.148zm-2.955 2.34s1.941-1.383 2.458-1.902c-4.763 1.011-15.638 1.147-15.638.269.0-.809 3.507-1.638 3.507-1.638s-7.773-.112-7.773 2.181C11.683 28.695 21.858 28.866 29.129 27.395z"/><path fill="#1565c0" d="M27.935 29.571c-4.509 1.499-12.814 1.02-10.354-.993-1.198.0-2.974.963-2.974 1.889.0 1.857 8.982 3.291 15.63.572l-2.302-1.468z"/><path fill="#1565c0" d="M18.686 32.739c-1.636.0-2.695 1.054-2.695 1.822.0 2.391 9.76 2.632 13.627.205l-2.458-1.632C24.271 34.404 17.014 34.579 18.686 32.739z"/><path fill="#1565c0" d="M36.281 36.632c0-.936-1.055-1.377-1.433-1.588 2.228 5.373-22.317 4.956-22.317 1.784.0-.721 1.807-1.427 3.477-1.093l-1.42-.839C11.26 34.374 9 35.837 9 37.017 9 42.52 36.281 42.255 36.281 36.632z"/><path fill="#1565c0" d="M39 38.604c-4.146 4.095-14.659 5.587-25.231 3.057C24.341 46.164 38.95 43.628 39 38.604z"/></g></svg>&nbsp;可爱的 Java</a>
<a class=sub-nav-link href=https://moonkite.cn/category/SpringCloud><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 48 48"><path fill="#8bc34a" d="M43.982 23.635c.069-4.261-.891-9.328-2.891-15.273L39.523 3.7l-2.13 4.433c-.114.237-.244.469-.38.698C33.514 5.827 28.974 4 24 4 12.954 4 4 12.954 4 24s8.954 20 20 20 20-8.954 20-20C44 23.877 43.984 23.758 43.982 23.635z"/><path fill="#fff" d="M39.385 32.558C36.262 36.86 30.734 37.091 25.531 37H18.75h-1.938c4.428-1.593 7.063-1.972 9.754-3.4 5.068-2.665 10.078-8.496 11.121-14.562-1.93 5.836-7.779 10.85-13.109 12.889-3.652 1.393-10.248 2.745-10.248 2.745l-.267-.145C9.573 32.268 9.437 22.214 17.6 18.968c3.574-1.423 6.993-.641 10.854-1.593 4.122-1.012 8.89-4.208 10.83-8.375C41.456 15.667 44.07 26.106 39.385 32.558zM15.668 38.445C15.386 38.795 14.955 39 14.505 39c-.823.0-1.495-.677-1.495-1.5s.677-1.5 1.495-1.5c.341.0.677.118.941.336C16.086 36.855 16.186 37.805 15.668 38.445z"/></svg>&nbsp; Spring Cloud 系列</a></div></li><li class=nav-item><a href=https://moonkite.cn/category/network class=nav-link><i class="fas fa-network-wired"></i>轻解计算机网络</a></li><li class=nav-item><a href=https://moonkite.cn/category/product class=nav-link><i class="fas fab fa-medapps"></i>我的产品</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>新项目为什么决定用 JDK 17了</h1><p class=header-date>作者：
风筝 /
2022-12-16<div class=header-underline></div><div class=header-date>&nbsp·&nbsp
  <span id=busuanzi_container_page_pv>本文被阅读<span id=busuanzi_value_page_pv></span>次</span></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://moonkite.cn/tag/Java/>Java</a>,
<a href=https://moonkite.cn/tag/JDK/>JDK</a>,
<a href=https://moonkite.cn/tag/JDK17/>JDK17</a>,
<a href=https://moonkite.cn/tag/JVM/>JVM</a></p></div></div></div></div></div><main><div class="container content"><article><p>最近在调研 JDK 17，并且试着将之前的一个小项目升级了一下，在测试环境跑了一段时间。<strong>最终，决定了，新项目要采用 JDK 17 了。</strong></p><p>JDK 1.8：“不是说好了，他发任他发，你用 Java 8 吗？”</p><p>不光是我呀，连 Spring Boot 都开始要拥护 JDK 17了，下面这一段是 Spring Boot 3.0 的更新日志。</p><blockquote><p>Spring Boot 3.0 requires Java 17 as a minimum version. If you are currently using Java 8 or Java 11, you&rsquo;ll need to upgrade your JDK before you can develop Spring Boot 3.0 applications.</p></blockquote><p>Spring Boot 3.0 需要 JDK 的最低版本就是 JDK 17，如果你想用 Spring Boot 开发应用，你需要将正在使用的 Java 8 或 Java 11升级到 Java 17。</p><p>选用 Java 17，概括起来主要有下面几个主要原因：</p><p>1、JDK 17 是 LTS (长期支持版)，可以免费商用到 2029 年。而且将前面几个过渡版（JDK 9-JDK 16）去其糟粕，取其精华的版本；</p><p>2、JDK 17 性能提升不少，比如重写了底层 NIO，至少提升 10% 起步；</p><p>3、大多数第三方框架和库都已经支持，不会有什么大坑；</p><p>4、准备好了，来吧。</p><p><strong>拿几个比较好玩儿的特性来说一下 JDK 17 对比 JDK 8 的改进。</strong></p><h2 id=密封类>密封类</h2><p>密封类应用在接口或类上，对接口或类进行继承或实现的约束，约束哪些类型可以继承、实现。例如我们的项目中有个基础服务包，里面有一个父类，但是介于安全性考虑，值允许项目中的某些微服务模块继承使用，就可以用密封类了。</p><p>没有密封类之前呢，可以用 <code>final</code>关键字约束，但是这样一来，被修饰的类就变成完全封闭的状态了，所有类都没办法继承。</p><p>密封类用关键字 <code>sealed</code>修饰，并且在声明末尾用 <code>permits</code>表示要开放给哪些类型。</p><p>下面声明了一个叫做 <code>SealedPlayer</code>的密封类，然后用关键字 <code>permits</code>将集成权限开放给了 <code>MarryPlayer</code>类。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>sealed</span> <span class=kd>class</span> <span class=nc>SealedPlayer</span> <span class=n>permits</span> <span class=n>MarryPlayer</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>play</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;玩儿吧&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>之后 <code>MarryPlayer</code> 就可以继承 <code>SealedPlayer</code>了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>non</span><span class=o>-</span><span class=n>sealed</span> <span class=kd>class</span> <span class=nc>MarryPlayer</span> <span class=kd>extends</span> <span class=n>SealedPlayer</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>play</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;不想玩儿了&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>继承类也要加上密封限制。比如这个例子中是用的 <code>non-sealed</code>，表示不限制，任何类都可以继承，还可以是 <code>sealed</code>，或者 <code>final</code>。</p><p>如果不是 permits 允许的类型，则没办法继承，比如下面这个，编译不过去，会给出提示 &ldquo;java: 类不得扩展密封类：org.jdk17.SealedPlayer（因为它未列在其 &lsquo;permits&rsquo; 子句中）&rdquo;</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>non</span><span class=o>-</span><span class=n>sealed</span> <span class=kd>class</span> <span class=nc>TomPlayer</span> <span class=kd>extends</span> <span class=n>SealedPlayer</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>play</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=空指针异常>空指针异常</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>String</span> <span class=n>s</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>s1</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>();</span>
</span></span></code></pre></div><p>JDK1.8 的版本下运行：</p><pre tabindex=0><code>Exception in thread &#34;main&#34; java.lang.NullPointerException
	at org.jdk8.App.main(App.java:10)
</code></pre><p>JDK17的版本（确切的说是14及以上版本）</p><pre tabindex=0><code>Exception in thread &#34;main&#34; java.lang.NullPointerException: Cannot invoke &#34;String.toLowerCase()&#34; because &#34;s&#34; is null
	at org.jdk17.App.main(App.java:14)
</code></pre><p>出现异常的具体方法和原因都一目了然。如果你的一行代码中有多个方法、多个变量，可以快速定位问题所在，如果是 JDK1.8，有些情况下真的不太容易看出来。</p><h2 id=yield关键字>yield关键字</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>int</span> <span class=nf>calc</span><span class=o>(</span><span class=kt>int</span> <span class=n>a</span><span class=o>,</span><span class=n>String</span> <span class=n>operation</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=n>var</span> <span class=n>result</span> <span class=o>=</span> <span class=k>switch</span> <span class=o>(</span><span class=n>operation</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;+&#34;</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>yield</span> <span class=n>a</span> <span class=o>+</span> <span class=n>a</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;*&#34;</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>yield</span> <span class=n>a</span> <span class=o>*</span> <span class=n>a</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>default</span> <span class=o>-&gt;</span> <span class=n>a</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>};</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=换行文本块>换行文本块</h2><p>如果你用过 Python，一定知道Python 可以用 <code>'hello world'</code>、<code>"hello world"</code>、<code>''' hello world '''</code>、<code>""" hello world """ </code>四种方式表示一个字符串，其中后两种是可以直接支持换行的。</p><p>在 JDK 1.8 中，如果想声明一个字符串，如果字符串是带有格式的，比如回车、单引号、双引号，就只能用转义符号，例如下面这样的 JSON 字符串。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>String</span> <span class=n>json</span> <span class=o>=</span> <span class=s>&#34;{\n&#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;  \&#34;name\&#34;: \&#34;古时的风筝\&#34;,\n&#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;  \&#34;age\&#34;: 18\n&#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;}&#34;</span><span class=o>;</span>
</span></span></code></pre></div><p>从 JDK 13开始，也像 Python 那样，支持三引号字符串了，所以再有上面的 JSON 字符串的时候，就可以直接这样声明了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>String</span> <span class=err>json</span> <span class=err>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        {
</span></span></span><span class=line><span class=cl><span class=s2>          &#34;</span><span class=err>name</span><span class=s2>&#34;: &#34;</span><span class=err>古时的风筝</span><span class=s2>&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>          &#34;</span><span class=err>age</span><span class=s2>&#34;: 18
</span></span></span><span class=line><span class=cl><span class=s2>        }
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span><span class=err>;</span>
</span></span></code></pre></div><h2 id=record记录类>record记录类</h2><p>类似于 Lombok 。</p><p>传统的Java应用程序通过创建一个类，通过该类的构造方法实例化类，并通过getter和setter方法访问成员变量或者设置成员变量的值。有了record关键字，你的代码会变得更加简洁。</p><p>之前声明一个实体类。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>User</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getName</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setName</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>使用 <code>Record</code>类之后，就像下面这样。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>record</span> <span class=nf>User</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>调用的时候像下面这样</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>RecordUser</span> <span class=n>recordUser</span> <span class=o>=</span> <span class=k>new</span> <span class=n>RecordUser</span><span class=o>(</span><span class=s>&#34;古时的风筝&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>recordUser</span><span class=o>.</span><span class=na>name</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>recordUser</span><span class=o>.</span><span class=na>toString</span><span class=o>());</span>
</span></span></code></pre></div><p>输出结果</p><p><img src=https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4cddc522449d49be9ec057f5d63eed41~tplv-k3u1fbpfcp-zoom-1.image alt></p><p>Record 类更像是一个实体类，直接将构造方法加在类上，并且自动给字段加上了 getter 和 setter。如果一直在用 Lombok 或者觉得还是显式的写上 getter 和 setter 更清晰的话，完全可以不用它。</p><h2 id=g1-垃圾收集器>G1 垃圾收集器</h2><p>JDK8可以启用G1作为垃圾收集器，JDK9到 JDK 17，G1 垃圾收集器是默认的垃圾收集器，G1是兼顾老年代和年轻代的收集器，并且其内存模型和其他垃圾收集器是不一样的。</p><p>G1垃圾收集器在大多数场景下，其性能都好于之前的垃圾收集器，比如CMS。</p><h2 id=zgc>ZGC</h2><p>从 JDk 15 开始正式启用 ZGC，并且在 JDK 16后对 ZGC 进行了增强，控制 stop the world 时间不超过10毫秒。但是默认的垃圾收集器仍然是 G1。</p><p>配置下面的参数来启用 ZGC 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>-XX:+UseZGC
</span></span></code></pre></div><p><strong>可以用下面的方法查看当前所用的垃圾收集器</strong></p><p>JDK 1.8 的方法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>jmap -heap <span class=m>8877</span>
</span></span></code></pre></div><p>JDK 1.8以上的版本</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>jhsdb jmap --heap --pid <span class=m>8877</span>
</span></span></code></pre></div><p>例如下面的程序采用 ZGC 垃圾收集器。</p><p><img src=https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adef9657c0254619a05a1bdb0b6d07a9~tplv-k3u1fbpfcp-zoom-1.image alt></p><h2 id=其他一些小功能>其他一些小功能</h2><p>1、支持 List.of()、Set.of()、Map.of()和Map.ofEntries()等工厂方法实例化对象；</p><p>2、Stream API 有一些改进，比如 <code>.collect(Collectors.toList())</code>可以直接写成 <code>.toList()</code>了，还增加了 <code>Collectors.teeing()</code>，这个挺好玩，有兴趣可以看一下；</p><p>3、<code>HttpClient</code>重写了，支持 HTTP2.0，不用再因为嫌弃 HttpClient 而使用第三方网络框架了，比如OKHTTP；</p><h2 id=升级-jdk-和-idea>升级 JDK 和 IDEA</h2><p>安装 JDK 17，这个其实不用说，只是推荐一个网站，这个网站可以下载各种系统、各种版本的 JDK 。地址是 <a href=https://adoptium.net/>https://adoptium.net/</a></p><p>还有，如果你想在 IDEA 上使用 JDK 17，可能要升级一下了，只有在 <code>2021.02</code>版本之后才支持 JDK 17。</p></article><h4>相关文章</h4><dl class=row><dd class=col-md-9><a href=/category/java/Graalvm/>过两年 JVM 可能就要被GraalVM替代了</a></dd><dd class=col-md-9><a href=/category/java/JVM-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E7%9A%84%E5%8E%9F%E5%9B%A0%E5%8F%8A%E9%A2%84%E9%98%B2/>JVM 内存溢出的原因及预防</a></dd><dd class=col-md-9><a href=/category/java/%E5%A6%82%E4%BD%95%E7%BC%96%E8%AF%91%E8%87%AA%E5%B7%B1%E7%9A%84-JDK/>手把手教你编译属于自己的 JDK</a></dd><dd class=col-md-9><a href=/category/java/Java-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%BC%AB%E6%B8%B8%E6%8C%87%E5%8D%97/>Java 字符串常量池漫游指南（图文并茂）</a></dd><dd class=col-md-9><a href=/category/java/%E7%BA%BF%E4%B8%8AJava%E7%A8%8B%E5%BA%8F%E5%8D%A0%E7%94%A8-CPU-%E8%BF%87%E9%AB%98%E8%AF%B7%E8%AF%B4%E4%B8%80%E4%B8%8B%E6%8E%92%E6%9F%A5%E6%96%B9%E6%B3%95/>线上Java程序占用 CPU 过高，请说一下排查方法？</a></dd></dl><div class=author-card><div class=underline></div><div class=author-box><div class=qr-author-image><a href=https://www.moonkite.cn><img src=/images/person.jpg alt=风筝></a></div><div class=author-content><p class=author-title>作者</p><p class=author-name>风筝</p><p class=author-desc>古时的风筝，一个平庸的程序员，主语言 Java，第二语言 Python，其实学 Python 的时间比 Java 还要早。喜欢写博客，写博客的过程能加深自己对一个知识点的理解，同时还可以分享给他人。喜欢做一些小东西，所以也会一些前端的东西，React、JavaScript、CSS 都会一些，做一些小工具还够用。</p></div></div></div><script src=https://utteranc.es/client.js repo=huzhicheng/blog-comment issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>网站地图</div><ul class=list-unstyled><li><a href=https://moonkite.cn/tags/>标签</a></li><li><a href=https://moonkite.cn/categories/>分类</a></li><li><a rel=alternate type=application/rss+xml href=https://moonkite.cn/index.xml><i class="fas fa-rss-square"></i> RSS订阅</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>社群</div><ul class=list-unstyled><li><a href=https://github.com/huzhicheng rel=noopener target=_blank>GitHub</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>友链</div><ul class=list-unstyled><li><a href=https://github.com/huzhicheng rel=noopener target=_blank>关于我</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em>Proudly powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo</a></em></small><br><small><em>Theme - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>Den</a></em></small><br><small>&copy;
风筝
2023</small></p></div></div><div class=busuanzi-footer><span id=busuanzi_container_site_pv>本站总访问量<span id=busuanzi_value_site_pv></span>次</span>
<span id=busuanzi_container_site_uv>本站访客数<span id=busuanzi_value_site_uv></span>人次</span></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=/js/bootstrap_4.1.3_js_bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script>
<script>$(document).ready(function(){$("#load_disqus").length&&$(window).scroll(function(){if($("#load_disqus").length){var e=$("#load_disqus").offset().top,t=$(window).scrollTop(),n=t+$(window).height();t<e&&e<n&&load_disqus()}})})</script></body></html>