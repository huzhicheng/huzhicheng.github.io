<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.113.0"><meta charset=utf-8><title>Java Stream 高级用法 · 古时的风筝</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="因为最近做了一个小需求，数据量不大，功能也比较简单，但是计算维度非常多，大部分的计算逻辑其实都可以直接写 SQL 实现，但是那样的话性能就太差了，所"><meta name=keywords content="Hugo,theme,编程,java,ChatGPT,程序员,开发"><link rel=canonical href=https://moonkite.cn/category/java/Java-Stream-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://moonkite.cn/css/den.css><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><meta property="og:title" content="Java Stream 高级用法"><meta property="og:description" content="因为最近做了一个小需求，数据量不大，功能也比较简单，但是计算维度非常多，大部分的计算逻辑其实都可以直接写 SQL 实现，但是那样的话性能就太差了，所"><meta property="og:type" content="article"><meta property="og:url" content="https://moonkite.cn/category/java/Java-Stream-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/"><meta property="article:section" content="category"><meta property="article:published_time" content="2023-01-12T08:56:23+08:00"><meta property="article:modified_time" content="2023-01-12T08:56:23+08:00"><meta itemprop=name content="Java Stream 高级用法"><meta itemprop=description content="因为最近做了一个小需求，数据量不大，功能也比较简单，但是计算维度非常多，大部分的计算逻辑其实都可以直接写 SQL 实现，但是那样的话性能就太差了，所"><meta itemprop=datePublished content="2023-01-12T08:56:23+08:00"><meta itemprop=dateModified content="2023-01-12T08:56:23+08:00"><meta itemprop=wordCount content="2618"><meta itemprop=keywords content="Java,JDK,Java Stream,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Java Stream 高级用法"><meta name=twitter:description content="因为最近做了一个小需求，数据量不大，功能也比较简单，但是计算维度非常多，大部分的计算逻辑其实都可以直接写 SQL 实现，但是那样的话性能就太差了，所"></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://moonkite.cn/images/background.png);background-position:top;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://moonkite.cn/></a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a href=https://moonkite.cn/ class=nav-link><i class="fas fad fa-h-square"></i>主页</a></li><li class=nav-item><a href=https://moonkite.cn/category/notes/ class=nav-link><i class='fas fa-yin-yang'></i>生活随笔</a></li><li class=nav-item><a href=javascript:void(0) class=nav-link><i class='fas fa-laptop-code'></i>技术文章</a><div class=sub-dropdown-menu><a class=sub-nav-link href=https://moonkite.cn/category/java><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48"><path fill="#f44336" d="M23.65 24.898c-.998-1.609-1.722-2.943-2.725-5.455C19.229 15.2 31.24 11.366 26.37 3.999c2.111 5.089-7.577 8.235-8.477 12.473-.823 3.898 5.752 8.426 5.757 8.426z"/><path fill="#f44336" d="M23.878 17.27c-.192 2.516 2.229 3.857 2.299 5.695.056 1.496-1.447 2.743-1.447 2.743s2.728-.536 3.579-2.818c.945-2.534-1.834-4.269-1.548-6.298.267-1.938 6.031-5.543 6.031-5.543S24.311 11.611 23.878 17.27z"/><g><path fill="#1565c0" d="M32.084 25.055c1.754-.394 3.233.723 3.233 2.01.0 2.901-4.021 5.643-4.021 5.643s6.225-.742 6.225-5.505c0-3.15-3.057-3.937-5.437-2.148zm-2.955 2.34s1.941-1.383 2.458-1.902c-4.763 1.011-15.638 1.147-15.638.269.0-.809 3.507-1.638 3.507-1.638s-7.773-.112-7.773 2.181C11.683 28.695 21.858 28.866 29.129 27.395z"/><path fill="#1565c0" d="M27.935 29.571c-4.509 1.499-12.814 1.02-10.354-.993-1.198.0-2.974.963-2.974 1.889.0 1.857 8.982 3.291 15.63.572l-2.302-1.468z"/><path fill="#1565c0" d="M18.686 32.739c-1.636.0-2.695 1.054-2.695 1.822.0 2.391 9.76 2.632 13.627.205l-2.458-1.632C24.271 34.404 17.014 34.579 18.686 32.739z"/><path fill="#1565c0" d="M36.281 36.632c0-.936-1.055-1.377-1.433-1.588 2.228 5.373-22.317 4.956-22.317 1.784.0-.721 1.807-1.427 3.477-1.093l-1.42-.839C11.26 34.374 9 35.837 9 37.017 9 42.52 36.281 42.255 36.281 36.632z"/><path fill="#1565c0" d="M39 38.604c-4.146 4.095-14.659 5.587-25.231 3.057C24.341 46.164 38.95 43.628 39 38.604z"/></g></svg>&nbsp;可爱的 Java</a>
<a class=sub-nav-link href=https://moonkite.cn/category/SpringCloud><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 48 48"><path fill="#8bc34a" d="M43.982 23.635c.069-4.261-.891-9.328-2.891-15.273L39.523 3.7l-2.13 4.433c-.114.237-.244.469-.38.698C33.514 5.827 28.974 4 24 4 12.954 4 4 12.954 4 24s8.954 20 20 20 20-8.954 20-20C44 23.877 43.984 23.758 43.982 23.635z"/><path fill="#fff" d="M39.385 32.558C36.262 36.86 30.734 37.091 25.531 37H18.75h-1.938c4.428-1.593 7.063-1.972 9.754-3.4 5.068-2.665 10.078-8.496 11.121-14.562-1.93 5.836-7.779 10.85-13.109 12.889-3.652 1.393-10.248 2.745-10.248 2.745l-.267-.145C9.573 32.268 9.437 22.214 17.6 18.968c3.574-1.423 6.993-.641 10.854-1.593 4.122-1.012 8.89-4.208 10.83-8.375C41.456 15.667 44.07 26.106 39.385 32.558zM15.668 38.445C15.386 38.795 14.955 39 14.505 39c-.823.0-1.495-.677-1.495-1.5s.677-1.5 1.495-1.5c.341.0.677.118.941.336C16.086 36.855 16.186 37.805 15.668 38.445z"/></svg>&nbsp; Spring Cloud 系列</a></div></li><li class=nav-item><a href=https://moonkite.cn/category/network class=nav-link><i class="fas fa-network-wired"></i>轻解计算机网络</a></li><li class=nav-item><a href=https://moonkite.cn/category/product class=nav-link><i class="fas fab fa-medapps"></i>我的产品</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>Java Stream 高级用法</h1><p class=header-date>作者：
风筝 /
2023-01-12<div class=header-underline></div><div class=header-date>&nbsp·&nbsp
  <span id=busuanzi_container_page_pv>本文被阅读<span id=busuanzi_value_page_pv></span>次</span></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://moonkite.cn/tag/Java/>Java</a>,
<a href=https://moonkite.cn/tag/Java-Stream/>Java Stream</a>,
<a href=https://moonkite.cn/tag/JDK/>JDK</a></p></div></div></div></div></div><main><div class="container content"><article><p>因为最近做了一个小需求，数据量不大，功能也比较简单，但是计算维度非常多，大部分的计算逻辑其实都可以直接写 SQL 实现，但是那样的话性能就太差了，所以最终采用了在内存中直接计算，这时候 Stream 就有大用处了。</p><p>Java Stream 是 JDK 8 开始提供的一种函数式风格的集合操作方法。我之前写过一篇 <a href="https://mp.weixin.qq.com/s?__biz=MzAxMjA0MDk2OA==&amp;mid=2449469926&amp;idx=1&amp;sn=69167b936c8e42bb3bbdf0c79882553a&amp;chksm=8fbcbf81b8cb369785923acda2bd3f708360ebaf633d9ca0e02e5788e22d8161f5abba2dd3d8&amp;token=723642012&amp;lang=zh_CN#rd">Java Stream 的文章 - 8000字长文让你彻底了解 Java 8 的 Lambda、函数式接口、Stream 用法和原理</a>，在掘金社区获得了超过 500 个赞，说明大家还是很喜欢用 Stream 的。</p><p><img src=https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5607342158c1409585bf1f6504d1ac53~tplv-k3u1fbpfcp-zoom-1.image alt></p><p>上一篇主要介绍了一些基础用法，这一篇主要就介绍三个功能，<strong>排序、分组和 teeing</strong>，teeing 是 JDK 12 才出现的。</p><h2 id=排序>排序</h2><h3 id=基本数据类型排序>基本数据类型排序</h3><p>基本数据类型就是字符串、整型、浮点型这些，也就是要排序的列表中的元素都是这些基本类型的，比如 <code>List&lt;Integer></code>的。</p><p>下面就用一个整型列表举例说明。</p><p><strong>正序排序</strong></p><p>正序排序，也可以叫做按照自然顺序排序，对于整型来说就是从小到大的。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>integerList</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>integerList</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>integerList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sorted</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>collect</span><span class=o>);</span>
</span></span></code></pre></div><p>输出结果是 <code>[0, 1, 2, 3, 4]</code>，这很简单没什么好说的。</p><p><strong>倒序排序</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>integerList</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>integerList</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>collect2</span> <span class=o>=</span> <span class=n>integerList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sorted</span><span class=o>(</span><span class=n>Comparator</span><span class=o>.</span><span class=na>reverseOrder</span><span class=o>())</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>collect2</span><span class=o>);</span>
</span></span></code></pre></div><p>倒序排就是从大到小排序，也很简单在 <code>sorted()</code>方法中添加 <code>Comparator.reverseOrder()</code> 就可以了。</p><p><code>sorted()</code> 方法接收的参数是<code>Comparator</code> 函数式接口，在 <a href="https://mp.weixin.qq.com/s?__biz=MzAxMjA0MDk2OA==&amp;mid=2449469926&amp;idx=1&amp;sn=69167b936c8e42bb3bbdf0c79882553a&amp;chksm=8fbcbf81b8cb369785923acda2bd3f708360ebaf633d9ca0e02e5788e22d8161f5abba2dd3d8&amp;token=723642012&amp;lang=zh_CN#rd">8000字长文让你彻底了解 Java 8 的 Lambda、函数式接口、Stream 用法和原理</a> 这篇文章清楚的讲了函数式接口和方法引用，可以翻过去看看。</p><h3 id=非基本类型实体排序>非基本类型实体排序</h3><p>基本类型的列表排序很简单，但是在实际项目中用到的情况不太多，经常用到的还是我们自定义类型的排序，比如项目中有一个用户实体、一个订单实体、一个产品实体等。</p><p>首先定一个<code>Product</code>实体类：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>lombok.Data</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @author fengzheng
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=nd>@Data</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Product</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 唯一标示
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Integer</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 所属类别
</span></span></span><span class=line><span class=cl><span class=cm>      */</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Integer</span> <span class=n>type</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 商品名称
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 价格
</span></span></span><span class=line><span class=cl><span class=cm>      */</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Double</span> <span class=n>price</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h4 id=按某一个字段排序>按某一个字段排序</h4><p>对应到我上面定义的这个实体，可以是按照 <code>id</code> 排序，或者按照 <code>price</code>排序。</p><p><strong>正序排序</strong></p><p>假设按照 <code>price</code>从小到大排序，也就是按照价格由低到高排序。</p><p>对应到 SQL 上，可以表示成这样的。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>product</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>price</span><span class=w> </span><span class=k>asc</span><span class=w>
</span></span></span></code></pre></div><p>那用 Stream 实现呢？</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>productList</span> <span class=o>=</span> <span class=n>initProductList</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sorted</span><span class=o>(</span><span class=n>Comparator</span><span class=o>.</span><span class=na>comparing</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getPrice</span><span class=o>))</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>等价于</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sorted</span><span class=o>((</span><span class=n>x</span><span class=o>,</span><span class=n>y</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>x</span><span class=o>.</span><span class=na>getPrice</span><span class=o>().</span><span class=na>compareTo</span><span class=o>(</span><span class=n>y</span><span class=o>.</span><span class=na>getPrice</span><span class=o>()))</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>等价于</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>comparator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>int</span> <span class=nf>compare</span><span class=o>(</span><span class=n>Product</span> <span class=n>p1</span><span class=o>,</span> <span class=n>Product</span> <span class=n>p2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>p1</span><span class=o>.</span><span class=na>getPrice</span><span class=o>().</span><span class=na>compareTo</span><span class=o>(</span><span class=n>p2</span><span class=o>.</span><span class=na>getPrice</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sorted</span><span class=o>((</span><span class=n>p1</span><span class=o>,</span> <span class=n>p2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>comparator</span><span class=o>.</span><span class=na>compare</span><span class=o>(</span><span class=n>p1</span><span class=o>,</span> <span class=n>p2</span><span class=o>))</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>这里面主要由我们提供自定义的就是函数式接口 <code>Comparator</code>，凡是实现了 compare () 方法的都可以。</p><p>上面我们自定义的这个 <code>comparator</code>，重载了 <code>compare</code>方法。compare 方法的返回值规则：</p><ol><li>前者小于后者，返回 -1；</li><li>前者大于后者，返回 1；</li><li>前者等于后者，返回 0；</li></ol><p>所以可以理解为，如果 compare 返回的是 1， Stream 就会交换两个实体的位置。所以这样一来，倒序排序就很好整了。</p><p><strong>倒序排序</strong></p><p>可以这样写，使用 reversed() 方法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sorted</span><span class=o>(</span><span class=n>Comparator</span><span class=o>.</span><span class=na>comparing</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getPrice</span><span class=o>).</span><span class=na>reversed</span><span class=o>())</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>或者可以</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>sorted</span><span class=o>(</span><span class=n>Comparator</span><span class=o>.</span><span class=na>comparing</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getPrice</span><span class=o>,</span><span class=n>Comparator</span><span class=o>.</span><span class=na>reverseOrder</span><span class=o>()))</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>还可以直接直接使用compare ，倒序排序就简单了，稍微改一下就好了。</p><p>直接用 <code>Lambda </code>表达式的写法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sorted</span><span class=o>((</span><span class=n>x</span><span class=o>,</span><span class=n>y</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>y</span><span class=o>.</span><span class=na>getPrice</span><span class=o>().</span><span class=na>compareTo</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>getPrice</span><span class=o>()))</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>等价于，抽取出自定义 <code>Comparator</code>的方法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>comparator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>            <span class=kd>public</span> <span class=kt>int</span> <span class=nf>compare</span><span class=o>(</span><span class=n>Product</span> <span class=n>p1</span><span class=o>,</span> <span class=n>Product</span> <span class=n>p2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>p2</span><span class=o>.</span><span class=na>getPrice</span><span class=o>().</span><span class=na>compareTo</span><span class=o>(</span><span class=n>p1</span><span class=o>.</span><span class=na>getPrice</span><span class=o>());</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sorted</span><span class=o>((</span><span class=n>p1</span><span class=o>,</span> <span class=n>p2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>comparator</span><span class=o>.</span><span class=na>compare</span><span class=o>(</span><span class=n>p1</span><span class=o>,</span> <span class=n>p2</span><span class=o>))</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>倒序和正序的区别其实就是将 <code>compare()</code>前后两个元素的位置对调一下。</p><p>对于大小比较的可以直接用 <code>compare()</code>方法，但是有一些情况可能不止这么简单。没有关系，我们不是可以自定义 Comparator 吗，在 Comparator 重写的 compare 方法中可以加入我们的排序逻辑，不管多么特殊、多么复杂，只要返回一个 int 类型的就可以了。</p><h4 id=按照多个字段排序>按照多个字段排序</h4><p>还有一些情况要按照两个甚至多个字段排序，一个主排序，一个次要排序。比如我们想要先按 type 升序，再按 price 降序。</p><p>对应到 SQL 上就像这样</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>product</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=k>asc</span><span class=p>,</span><span class=n>price</span><span class=w> </span><span class=k>desc</span><span class=w>
</span></span></span></code></pre></div><p>那用 Stream 来实现是怎么样的呢？用 <code>thenComparing</code>连接多个要排序的属性。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>sorted</span><span class=o>(</span><span class=n>Comparator</span><span class=o>.</span><span class=na>comparing</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getType</span><span class=o>).</span><span class=na>thenComparing</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getPrice</span><span class=o>,</span> <span class=n>Comparator</span><span class=o>.</span><span class=na>reverseOrder</span><span class=o>())).</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>或者还可以定义两个 Comparator</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>typeComparator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>int</span> <span class=nf>compare</span><span class=o>(</span><span class=n>Product</span> <span class=n>p1</span><span class=o>,</span> <span class=n>Product</span> <span class=n>p2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>p1</span><span class=o>.</span><span class=na>getType</span><span class=o>().</span><span class=na>compareTo</span><span class=o>(</span><span class=n>p2</span><span class=o>.</span><span class=na>getType</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>priceComparator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>int</span> <span class=nf>compare</span><span class=o>(</span><span class=n>Product</span> <span class=n>p1</span><span class=o>,</span> <span class=n>Product</span> <span class=n>p2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>p2</span><span class=o>.</span><span class=na>getPrice</span><span class=o>().</span><span class=na>compareTo</span><span class=o>(</span><span class=n>p1</span><span class=o>.</span><span class=na>getPrice</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>};</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sorted</span><span class=o>(</span><span class=n>typeComparator</span><span class=o>.</span><span class=na>thenComparing</span><span class=o>(</span><span class=n>priceComparator</span><span class=o>))</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></div><p>怎么样，一点难度都没有吧。</p><h2 id=分组>分组</h2><p>除了排序，还有一个非常有用而且经常会用的功能就是分组功能。分组功能是 <code>collect（）</code>方法提供的功能，返回值是一个字典类型。</p><h3 id=根据-type-进行分组>根据 type 进行分组</h3><p>对应到 SQL 中就是下面这样</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>product</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>type</span><span class=w>
</span></span></span></code></pre></div><p>用 Stream 来实现呢，就是下面这样子</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>groupingBy</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getType</span><span class=o>));</span>
</span></span></code></pre></div><p>最后生成的对象是一个 Map 类型，key 是用来作为分组依据的字段值，value 是一个列表，也就是同一组的对象集合。在这个例子中，key 就是 product 对象的 type 属性，value 就是 type 相同的 Product 对象的集合。</p><p>如果只是求出每一个组所包含的对象个数，可以这样实现，不用遍历 Map 这么麻烦。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>,</span> <span class=n>Long</span><span class=o>&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>groupingBy</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getType</span><span class=o>,</span> <span class=n>Collectors</span><span class=o>.</span><span class=na>counting</span><span class=o>()));</span>
</span></span></code></pre></div><h3 id=根据两个或多个字段分组>根据两个或多个字段分组</h3><p>有时候我们可能会根据不止一个字段进行分组，比如想按照类别相同且价格相同进行分组。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>                <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>groupingBy</span><span class=o>(</span><span class=n>p</span> <span class=o>-&gt;</span> <span class=n>p</span><span class=o>.</span><span class=na>getType</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;|&#34;</span> <span class=o>+</span> <span class=n>p</span><span class=o>.</span><span class=na>getPrice</span><span class=o>()));</span>
</span></span></code></pre></div><p>等价于，将分组依据单独抽取出一个方法，这样就可以加入比较复杂的逻辑了，最终返回的是一个字符串。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>   <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>groupingBy</span><span class=o>(</span><span class=n>p</span> <span class=o>-&gt;</span> <span class=n>buildGroupKey</span><span class=o>(</span><span class=n>p</span><span class=o>)));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>buildGroupKey</span><span class=o>(</span><span class=n>Product</span> <span class=n>p</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=k>return</span> <span class=n>p</span><span class=o>.</span><span class=na>getType</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;|&#34;</span> <span class=o>+</span> <span class=n>p</span><span class=o>.</span><span class=na>getPrice</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>为什么两个字段之间要加一个分隔符呢，这是因为有些情况我们还会用到分组依据中的某一个字段，加入分隔符之后方便拆分字符串。当然了，也可以拿到这个分组下的任意一个元素获取。</p><h3 id=嵌套分组>嵌套分组</h3><p>上面的根据多个字段分组是把多个字段当做同一级别并且的关系处理，还有一些时候呢，我们想要先按一个字段分组，再分组中再按另一个字段分组，这样就形成了一个嵌套关系，比如先按 type 分组，再按 price 分组，这就相当于是一个二维字典（两个层级）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>,</span> <span class=n>Map</span><span class=o>&lt;</span><span class=n>Double</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;&gt;&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>groupingBy</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getType</span><span class=o>,</span> <span class=n>Collectors</span><span class=o>.</span><span class=na>groupingBy</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getPrice</span><span class=o>)));</span>
</span></span></code></pre></div><p>通过返回值类型就可以看出来是怎么样的一个层级关系。</p><h2 id=teeing>teeing()</h2><p>这是 JDK 12 才出来的方法，所以要用这个方法，比如在 JDK12 以上才行。它的作用是对两个收集器（Collectors）的结果进行处理。上面的例子中，求出最高价格和最低价格的，并输出为一个字符串，将两个价格用 <code>~</code>符号连接。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>String</span> <span class=n>result</span> <span class=o>=</span> <span class=n>productList</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>teeing</span><span class=o>(</span>
</span></span><span class=line><span class=cl>  <span class=n>Collectors</span><span class=o>.</span><span class=na>minBy</span><span class=o>(</span><span class=n>Comparator</span><span class=o>.</span><span class=na>comparing</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getPrice</span><span class=o>)),</span>
</span></span><span class=line><span class=cl>  <span class=n>Collectors</span><span class=o>.</span><span class=na>maxBy</span><span class=o>(</span><span class=n>Comparator</span><span class=o>.</span><span class=na>comparing</span><span class=o>(</span><span class=n>Product</span><span class=o>::</span><span class=n>getPrice</span><span class=o>)),</span>
</span></span><span class=line><span class=cl>  <span class=o>(</span><span class=n>min</span><span class=o>,</span> <span class=n>max</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>min</span><span class=o>.</span><span class=na>get</span><span class=o>().</span><span class=na>getPrice</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;~&#34;</span> <span class=o>+</span> <span class=n>max</span><span class=o>.</span><span class=na>get</span><span class=o>().</span><span class=na>getPrice</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>));</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>result</span><span class=o>);</span>
</span></span></code></pre></div><p>最终得到的结果是一个字符串，打印如下，测试数据没有做小数位限制。</p><pre tabindex=0><code>4.347594572793579~89.43160979811124
</code></pre><p>最终的返回类型根据teeing() 方法的最后一个参数的返回结果而定。 min 和 max 这两个参数就是前两个收集器 <code>Collectors.minBy</code>和 <code>Collectors.maxBy</code>的返回结果，因为返回类型是 <code>Optional </code>，所以再取值的时候要加上 <code>get</code>。</p><h2 id=总结>总结</h2><p>Stream 提供了很丰富的 API ，最大的好处是让我们可以少写很多代码，熟练掌握之后，可以在一些对应的场景快速实现我们想要的逻辑。</p><p>有同学说，不行啊，又是 filter 、又是 collect、又是 Collectors ，根本记不住啊。没关系，记不住也正常，它本来就是一个工具，我们其实只要知道它可以实现什么功能，具体的用法可以随用随查吗。这不，我的这两篇文章就可以放进收藏夹里，什么时候用，什么时候打开查一下就好了。</p><p>下次碰到类似的场景，记得用 Stream 试一下吧。</p></article><h4>相关文章</h4><dl class=row><dd class=col-md-9><a href=/category/SpringCloud/0-Srping-Cloud-%E5%BC%80%E7%AF%87/>0. Spring Cloud 是什么</a></dd><dd class=col-md-9><a href=/category/SpringCloud/1-Spring-Cloud-Eureka-%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/>1. Spring Cloud Eureka 实现服务注册与发现</a></dd><dd class=col-md-9><a href=/category/SpringCloud/2-Spring-Cloud-Eureka-%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6/>2. Spring Cloud Eureka 实现安全控制</a></dd><dd class=col-md-9><a href=/category/SpringCloud/3-Spring-Cloud-Eureka-%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/>3. Spring Cloud Eureka 实现高可用服务发现注册中心</a></dd><dd class=col-md-9><a href=/category/SpringCloud/4.-Spring-Cloud-Config-%E5%AE%9E%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/>4. Spring Cloud Config 实现配置中心，看这一篇就够了</a></dd></dl><div class=author-card><div class=underline></div><div class=author-box><div class=qr-author-image><a href=https://www.moonkite.cn><img src=/images/person.jpg alt=风筝></a></div><div class=author-content><p class=author-title>作者</p><p class=author-name>风筝</p><p class=author-desc>古时的风筝，一个平庸的程序员，主语言 Java，第二语言 Python，其实学 Python 的时间比 Java 还要早。喜欢写博客，写博客的过程能加深自己对一个知识点的理解，同时还可以分享给他人。喜欢做一些小东西，所以也会一些前端的东西，React、JavaScript、CSS 都会一些，做一些小工具还够用。</p></div></div></div><script src=https://utteranc.es/client.js repo=huzhicheng/blog-comment issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>网站地图</div><ul class=list-unstyled><li><a href=https://moonkite.cn/tags/>标签</a></li><li><a href=https://moonkite.cn/categories/>分类</a></li><li><a rel=alternate type=application/rss+xml href=https://moonkite.cn/index.xml><i class="fas fa-rss-square"></i> RSS订阅</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>社群</div><ul class=list-unstyled><li><a href=https://github.com/huzhicheng rel=noopener target=_blank>GitHub</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>友链</div><ul class=list-unstyled><li><a href=https://github.com/huzhicheng rel=noopener target=_blank>关于我</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em>Proudly powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo</a></em></small><br><small><em>Theme - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>Den</a></em></small><br><small>&copy;
风筝
2023</small></p></div></div><div class=busuanzi-footer><span id=busuanzi_container_site_pv>本站总访问量<span id=busuanzi_value_site_pv></span>次</span>
<span id=busuanzi_container_site_uv>本站访客数<span id=busuanzi_value_site_uv></span>人次</span></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script>
<script>$(document).ready(function(){$("#load_disqus").length&&$(window).scroll(function(){if($("#load_disqus").length){var e=$("#load_disqus").offset().top,t=$(window).scrollTop(),n=t+$(window).height();t<e&&e<n&&load_disqus()}})})</script></body></html>